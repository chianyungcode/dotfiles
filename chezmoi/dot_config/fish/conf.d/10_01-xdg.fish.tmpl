# XDG
# Configures XDG specification environment variables.
# https://specifications.freedesktop.org/basedir-spec/latest/

# ===============================
# XDG Base Directories
# ===============================
set -Ux XDG_DATA_HOME "$HOME/.local/share"
set -Ux XDG_CONFIG_HOME "$HOME/.config"
set -Ux XDG_STATE_HOME "$HOME/.local/state"
set -Ux XDG_CACHE_HOME "$HOME/.cache"
set -Ux XDG_DATA_DIRS "$XDG_DATA_HOME:/usr/local/share:/usr/share"

# ===============================
# PATH prepend
# ===============================
set -Ux PATH "$HOME/.local/bin" $PATH

# ===============================
# XDG User Directories
# ===============================
if type -q xdg-user-dir
    set -Ux XDG_DESKTOP_DIR (xdg-user-dir DESKTOP)
    set -Ux XDG_DOWNLOAD_DIR (xdg-user-dir DOWNLOAD)
    set -Ux XDG_TEMPLATES_DIR (xdg-user-dir TEMPLATES)
    set -Ux XDG_PUBLICSHARE_DIR (xdg-user-dir PUBLICSHARE)
    set -Ux XDG_DOCUMENTS_DIR (xdg-user-dir DOCUMENTS)
    set -Ux XDG_MUSIC_DIR (xdg-user-dir MUSIC)
    set -Ux XDG_PICTURES_DIR (xdg-user-dir PICTURES)
    set -Ux XDG_VIDEOS_DIR (xdg-user-dir VIDEOS)
end

# ===============================
# Application-specific paths
# ===============================
# Important: These environment variables must be exported **before** initializing
# any CLI tools, so the tools can read the customized locations.
#
# Example:
# - `atuin init fish | source` in `90_atuin.fish` will read `STARSHIP_CONFIG`
# - Making `90_<name>` prefix ensures the correct order because environment variable that used in cli later in `90_` prefix are already exported in `10_04-env.fish` this ensures the correct configuration is applied before the process starts.


# --- Configuration ---
set -Ux GIT_CONFIG_GLOBAL "$XDG_CONFIG_HOME/git/config"
set -Ux PROTO_HOME "$XDG_CONFIG_HOME/proto"
set -Ux STARSHIP_CONFIG "$XDG_CONFIG_HOME/starship/starship.toml"
set -Ux PARALLEL_HOME "$XDG_CONFIG_HOME/parallel"
set -Ux SCREENRC "$XDG_CONFIG_HOME/screen/screenrc"
set -Ux WGETRC "$XDG_CONFIG_HOME/wgetrc"

# --- Data ---
set -Ux _ZO_DATA_DIR "$XDG_DATA_HOME/zoxide"

{{ if and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "arch") -}}
set -Ux HYPRLAND_CONFIG "$XDG_DATA_HOME/hypr/hyprland.conf"
set -Ux TERMINFO "$XDG_DATA_HOME/terminfo"
set -Ux TERMINFO_DIRS "$XDG_DATA_HOME/terminfo:/usr/share/terminfo"
{{ end -}}

# --- Cache ---
set -Ux ANTIDOTE_HOME "$XDG_CACHE_HOME/antidote"

# --- State & Misc ---
set -Ux LESSHISTFILE /tmp/less-hist
set -Ux PYTHON_HISTORY "$XDG_STATE_HOME/python_history"
