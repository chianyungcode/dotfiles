[user]
  name = "{{ .git_user}}"
  email = "{{ .git_email }}"

[ui]
  default-command = "log"
  pager = "delta"
  diff-editor = "diffedit3"
  diff-formatter = ":git"
  editor = "nvim"

[git]
  push-new-bookmarks = true

[templates]
  git_push_bookmark = '"chianyung/push-" ++ change_id.short()'

[template-aliases]
  # 'format_short_id(id)' = 'id.shortest()'
  # 'format_short_id(id)' = 'id.shortest(12).prefix() ++ "[" ++ id.shortest(12).rest() ++ "]"'

[signing]
  behavior = "own"
  backend = "ssh"
  {{- if and .use_secrets (eq .git_user "chianyungcode") }}
  key = "{{ onepasswordRead .secrets.git_signing_key_cny }}"
  {{- else if and .use_secrets (eq .git_user "seraphynee") }}
  key = "{{ onepasswordRead .secrets.git_signing_key_phyne }}"
  {{- end }}

[aliases]
  ed = ["edit"]
  la = ["log", "-r", "all()"]
  abd = ["abandon"]
  fetch = ["git", "fetch"]
  init = ["git", "init", "--colocate"]
  mark = ["bookmark", "set", "-r"]
  markc = ["bookmark", "set", "-r", "@"]
  push = ["git", "push", "--allow-new"]
  track = ["bookmark", "track"]
