#!/usr/bin/env bash

# Source shared script utilities
{{ template "shared_script_utils.bash" . }}

header "Installing proto - Language version manager"

# Install proto - Universal version manager
# Based on official installation: https://moonrepo.dev/docs/proto/install
if command -v proto >/dev/null 2>&1; then
    info "proto is already installed."
    PROTO_VERSION=$(proto --version 2>/dev/null | awk '{print $2}' || echo "unknown")
    info "Current proto version: $PROTO_VERSION"
else
    info "Installing proto..."
    if curl -fsSL https://moonrepo.dev/install/proto.sh | bash; then
        info "proto installed successfully"
    else
        error "Failed to install proto"
        exit 1
    fi
fi
